<html>
	<head>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.22.2/moment.min.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.9.1/underscore-min.js"></script>
		<script src="https://www.gstatic.com/firebasejs/5.2.0/firebase.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/livestamp/1.1.2/livestamp.min.js"></script>
		<script>
		  // Initialize Firebase
		  var config = {
		    apiKey: "AIzaSyBCnueMeP35HrfaEmIph8TEvYgw4uDKdT4",
		    authDomain: "doms-7dbb4.firebaseapp.com",
		    databaseURL: "https://doms-7dbb4.firebaseio.com",
		    projectId: "doms-7dbb4",
		    storageBucket: "doms-7dbb4.appspot.com",
		    messagingSenderId: "1069770952535"
		  };
		  firebase.initializeApp(config);
		</script>
		<script type="text/javascript" src="dom.js"></script>
		<link rel="stylesheet" type="text/css" href="dom.css"/>
	</head>
	<body>
		<div id="appcontainer"></div>
		<a class="fab" href="#">+</a>
		<script type="text/template" id="domain_list_template">
			<div class="domain_list_template">
				<div class="header">
					<div class="star"><i/></div>
					<div class="name">Name</div>
					<div class="expires">Expires</div>
					<div class="available">Will be available</div>
					<div class="lastchecked">Last Checked</div>
					<div class="check"></div>
				</div>
				 <% _.each( domains, function( domain,key ){
				 var row = app.createRow(domain);				 
				 %>
				 <%=row%>
				 <%})%>
			</div>
	</script>
	<script type="text/template" id="row_template">
		<div class="domain" data-domain="<%=name%>">
				 	<div class="rating">
				 		<select class="rating">
				 			<option value="0">no rating</option>
				 			<%
				 			if(!rating){var rating=0}
				 			for(var i=1;i<=10;i++){
				 				%>
				 				<option value="<%=i%>" <%if(rating == i){%>selected<%}%>><%=i%></option>
				 				<%
				 			}
				 			%>
				 		</select>	
				 	</div>
				 	<div class="name"><%=name%></div>
				 	<div class="expires <%if(moment(expires).valueOf()<new Date().valueOf()){%>expired<%}%>">
				 		<%=moment(expires).format('MM-DD-YYYY')%>
				 	</div>
				 	<div class="available">
				 		<%=moment(expires).add(90, 'days').format('MM-DD-YYYY')%>
				 	</div>
				 	
				 	<div class="lastchecked" data-livestamp="<%=lastchecked/1000%>"></div>

				 	<div class="check"><a href="#" class="check" data-domain="<%=name%>">update now</a></div>
				 	<div class="remove"><a href="#" class="remove" data-domain="<%=name%>">remove</a></div>
				 </div>
	</script>
	<script type="text/template" id="probe_modal_template">
			<div class="overlay" id="modal_overlay">
				<div class="modal">
					<div class="content">
						<input type="text" id="domainname" placeholder="Domain Name"/>
					</div>
					<div class="footer">
						<span class="message"></span>
						<button id="probeCancel" class="silent">Cancel</button>
						<button id="probeNext" disabled>Next</button>
					</div>
				</div>
			</div>
	</script>
	</body>
</html>